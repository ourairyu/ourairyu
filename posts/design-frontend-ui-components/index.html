<!DOCTYPE html> <html lang="zh-CN" dir="ltr"> <head> <meta charset="UTF-8"> <!-- SEO --> <title>聊聊前端 UI 组件：组件设计</title> <meta property="og:title" content="聊聊前端 UI 组件：组件设计"> <meta name="description" content="本文是微信朋友圈所立 flag 的「引子」。"> <meta property="og:description" content="本文是微信朋友圈所立 flag 的「引子」。"> <meta name="keywords" content="软件工程,前端开发,前端工程"> <link rel="canonical" href="https://ourai.ws/posts/design-frontend-ui-components/"> <meta property="og:url" content="https://ourai.ws/posts/design-frontend-ui-components/"> <meta property="og:site_name" content="欧雷流"> <script type="application/ld+json"> { "@context" : "http://schema.org", "@type" : "WebSite", "name" : "欧雷流", "url" : "https://ourai.ws" } </script> <meta property="og:image" content="https://ourai.ws/assets/posts/20210128/banner-50e451242d84894c6fb11f731086b841956eb7dede50a2d4e3b516019c10efe2.png"> <meta property="og:type" content="article"> <meta property="article:published_time" content="2021-01-28T12:00:00+08:00"> <link rel="next" href="https://ourai.ws/posts/atomic-design-how-to-design-systems-of-components/" title="原子设计：如何设计组件体系"> <link rel="prev" href="https://ourai.ws/posts/write-books/" title="我若出书，你欲看否？"> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "NewsArticle", "headline": "聊聊前端 UI 组件：组件设计", "image": "/assets/posts/20210128/banner-50e451242d84894c6fb11f731086b841956eb7dede50a2d4e3b516019c10efe2.png", "datePublished": "2021-01-28T12:00:00+08:00", "description": "本文是微信朋友圈所立 flag 的「引子」。" } </script> <script type="application/ld+json"> { "@context" : "http://schema.org", "@type" : "person", "name" : "欧雷流", "url" : "https://ourai.ws", "sameAs" : null } </script> <link rel="author" href="https://ourai.ws"> <!-- 页面渲染兼容性 --> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="renderer" content="webkit"> <meta name="viewport" content="width=device-width,initial-scale=1.0"> <!-- 订阅 --> <link type="application/atom+xml" rel="alternate" href="https://ourai.ws/atom.xml" title="欧雷流" /> <link type="application/rss+xml" rel="alternate" href="//ourai.ws/rss.xml" title="欧雷流"> <meta name="theme-color" content="#0871ab"> <link rel="icon" href="/assets/favicon-3e749ca030e3b71eb2662d947c789061d2da9e0f4ee5f3360cfa9ccbe053c8ba.ico"> <!-- 静态资源 --> <link type="text/css" rel="stylesheet" href="/assets/disqusjs.min-b077139304675330d06888b873bd88158951637593a3c17c4674bc855caf71af.css"> <link type="text/css" rel="stylesheet" href="/assets/global-b623500154e70cdef18bd463a0ef409c46da6d1ad99756cf169ddb354874bcbc.css"> <link type="text/css" rel="stylesheet" href="/assets/share-2811f36e337fef8021089414f657904b7e88db17d8ecade0688c8c3f5e632a5c.css"> <link type="text/css" rel="stylesheet" href="/assets/pages/post-d5f1244d69bfc31e3c7b73b16140ed8a09f0b5af40515abeae522bee80e92ec9.css"> <script type="text/javascript" src="/assets/statistic-ae0fea4509b55747b1bcc6318c58abf5817e03e26505a307f438b42f0c6783bc.js"></script> <script type="text/javascript" src="/assets/global-b3a80dd53acf48ad7228d6fd741dba15d3845cbc3783bdbbf7244151a45628aa.js"></script> <!--[if lt IE 9]> <script type="text/javascript" src="/assets/support_ie8-e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.js"></script> <![endif]--> </head> <body class="Page has-headerImage" itemscope itemtype="http://schema.org/WebPage"> <header class="Page-header"> <div class="navbar navbar-static-top"> <div class="container"> <div class="navbar-header"> <button class="navbar-toggle collapsed" type="button" data-target=".Page-navs" data-toggle="collapse"> <span class="sr-only">切换导航</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a href="/" class="navbar-brand" title="回到首页">Ourai.WS</a> </div> <!-- 导航 --> <nav class="Page-navs navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li class="dropdown"> <a class="dropdown-toggle" href="/works/" data-toggle="dropdown">创作 <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/posts/">文章</a></li> <li><a href="/videos/">视频</a></li> <li class="divider"></li> <li><a href="/moments/murmur/">想法</a></li> <li><a href="/notes/">笔记</a></li> <li><a href="https://s.ourai.ws/topics/weekly/?utm_source=ourai.ws&utm_medium=common-header" target="_blank" rel="external nofollow">周报</a></li> <li class="divider"></li> <li><a href="/answers/">问答</a></li> <li><a href="/open-source/">开源</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" href="/mine/" data-toggle="dropdown">我的 <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/projects/">计划</a></li> <li><a href="/people/">关系</a></li> <li class="divider"></li> <!-- 书影音 --> <li><a href="/publications/">读物</a></li> <li><a href="/dramas/">戏剧</a></li> <li class="divider"></li> <li><a href="/devices/">设备</a></li> <!-- <li><a href="#">Separated link</a></li> --> <!-- リア充 --> <li class="divider"></li> <li><a href="https://o.ourai.ws/?utm_source=ourai.ws&utm_medium=common-header" target="_blank" rel="external nofollow">生活</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" href="/about/" data-toggle="dropdown">关于 <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/about/">网站</a></li> <li><a href="https://linxoid.com/ourai/?utm_source=ourai.ws&utm_medium=common-header" target="_blank" rel="external nofollow">站长</a></li> <li class="divider"></li> <li><a href="/sponsor/">赞助</a></li> <li><a href="https://yaol.in/cooperation/?utm_source=ourai.ws&utm_medium=common-header" target="_blank" rel="external nofollow">合作</a></li> </ul> </li> <li><a href="/thanks/">致谢</a></li> </ul> </nav> </div> </div> </header> <main class="Page-content"> <!-- 页面横幅 --> <div class="Page-banner hidden-xs" style="background-image: url(/assets/posts/20210128/banner-50e451242d84894c6fb11f731086b841956eb7dede50a2d4e3b516019c10efe2.png);"> <figure class="sr-only"> <img src="/assets/posts/20210128/banner-50e451242d84894c6fb11f731086b841956eb7dede50a2d4e3b516019c10efe2.png" alt="Layers"> <figcaption>Layers</figcaption> </figure> </div> <!-- 内容主体 --> <div class="container"> <article class="Page-main Article"> <header class="Article-header"> <h1 class="Article-title">聊聊前端 UI 组件：组件设计</h1> <p><a href="https://linxoid.com/ourai/" target="_blank" rel="external nofollow">欧雷</a> 发表于 <time datetime="2021-01-28T12:00:00+08:00">2021-01-28 12:00:00</time></p> <p class="Article-commentCount"><i class="fa fa-comments"></i><a href="#disqus_thread" data-disqus-identifier="/posts/design-frontend-ui-components/">0 条评论</a></p> <p class="Article-tags hidden-xs"><i class="fa fa-tags"><span class="sr-only">标签：</span></i><a class="Article-tag" href="/tags/software-engineering/">软件工程</a><a class="Article-tag" href="/tags/frontend-web-development/">前端开发</a><a class="Article-tag" href="/tags/frontend-engineering/">前端工程</a></p> </header> <div class="Article-content col-md-9"> <p>在<a href="/series/talking-about-frontend-ui-components/">本系列</a>文章《<a href="/posts/the-system-of-frontend-ui-components/">聊聊前端 UI 组件：组件体系</a>》中初步说明了 UI 组件的架构设计，本文将在此基础上进一步展开说说那篇文章中一笔带过的部分，并阐述在设计一个 UI 组件时应该注意的点有哪些。</p> <h2 id="section">目录结构</h2> <p>在《<a href="/posts/the-system-of-frontend-ui-components/">聊聊前端 UI 组件：组件体系</a>》中列出的目录结构的基础上做了些许调整——</p> <figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>component
   ├── demo                       # 示例相关文件
   │   └── ...
   ├── test                       # 测试相关文件
   │   └── ...
   ├── style                      # 样式相关文件
   │   ├── _functions.scss        # Sass 函数（可选）
   │   ├── _properties.scss       # CSS 自定义属性（必需），风格组件的一部分，供外部运行时自定义主题风格
   │   ├── _variables.scss        # Sass 变量（必需），风格组件的一部分，供外部编辑时/编译时自定义主题风格
   │   ├── _mixins.scss           # Sass 混入（可选）
   │   └── _rules.scss            # CSS 规则（必需），视觉组件，具有约束结构的作用
   ├── typing                     # 类型相关文件
   │   ├── custom-properties.ts   # CSS 自定义属性配置项（必需），用于运行时生成 CSS 自定义属性
   │   ├── aliases.ts             # 类型别名（可选）
   │   ├── interfaces.ts          # 结构组件接口（必需）
   │   └── index.ts               # 类型统一导出
   ├── HeadlessComponent.ts       # 无头组件，UI 组件与结构无关的逻辑
   ├── Component.vue              # 结构组件，受生成 HTML 的 JS 库/框架的源码、平台限定的视图结构描述语言影响
   ├── index.ts                   # 模块统一导出
   ├── changelog.md               # 组件变更记录
   ├── readme.md                  # 组件说明文档
   ├── metadata.yml
   └── package.json</code></pre></figure> <h2 id="section-1">命名约定</h2> <h3 id="html--css-class">HTML &amp; CSS class</h3> <p>在基于组件开发（Component-based Development），即大家所说的「组件化」，在 web 前端领域普及之前，流行过一种神奇的 class 命名方式，可以说是一种方法论了——原子类（atomic classes）。</p> <p>估计一入行就是 React、Vue 横行的前端，压根儿就没听过更没见过「原子类」是个什么东西——</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">.</span><span class="nc">w-100</span> <span class="p">{</span> <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">.</span><span class="nc">w-150</span> <span class="p">{</span> <span class="k">width</span><span class="p">:</span> <span class="mi">150</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">.</span><span class="nc">h-100</span> <span class="p">{</span> <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">.</span><span class="nc">h-150</span> <span class="p">{</span> <span class="k">height</span><span class="p">:</span> <span class="mi">150</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span>

<span class="p">.</span><span class="nc">m-10</span> <span class="p">{</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">.</span><span class="nc">m-20</span> <span class="p">{</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">.</span><span class="nc">mt-10</span> <span class="p">{</span> <span class="k">margin-top</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">.</span><span class="nc">ml-15</span> <span class="p">{</span> <span class="k">margin-left</span><span class="p">:</span> <span class="mi">15</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span>

<span class="p">.</span><span class="nc">bgc-red</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span> <span class="p">}</span>
<span class="p">.</span><span class="nc">bgc-greed</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="kc">green</span><span class="p">;</span> <span class="p">}</span>

<span class="p">.</span><span class="nc">c-fff</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span> <span class="p">}</span>
<span class="p">.</span><span class="nc">c-000</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#000</span><span class="p">;</span> <span class="p">}</span>

<span class="p">.</span><span class="nc">f-l</span> <span class="p">{</span> <span class="k">float</span><span class="p">:</span> <span class="kc">left</span><span class="p">;</span> <span class="p">}</span>
<span class="p">.</span><span class="nc">f-r</span> <span class="p">{</span> <span class="k">float</span><span class="p">:</span> <span class="kc">right</span><span class="p">;</span> <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;w-150 h-150 f-l mt-10 ml-15 bgc-red c-000&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;w-100 h-100 f-r m-20 bgc-green c-fff&quot;</span><span class="p">&gt;</span>Atomic classes<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></figure> <p>看到了吧，这种方法论强调的就是尽可能将 CSS 的每个属性和值的组合拆成 class，命名方式也基本是「属性名 + 属性值」的形式，并且属性名和属性值是否进行「简写」以及中间有没有 <code>-</code>、<code>_</code> 等分隔符就看编写的人的素养和心情了。</p> <p>原子类的「优点」是，它把 class 拆分到足够细，很好很「原子」；原子化带来的特点就是可组合性很强，这样任何页面都可以通过原子类的有机组合去实现，只有想不到，没有做不到！哪天设计师说要把按钮距离左边的 15 像素改为 10 像素——没问题！把 <code>&lt;button&gt;</code> 的 <code>.ml-15</code> 换成 <code>.ml-10</code> 就好！小菜一碟！</p> <p>为什么上面说的「优点」是加了引号的？我就想知道，原子类除了写的时候字符数可能会稍微少些，跟写内联样式（inline style）有什么区别？有更语义化吗？可读性有变更好吗？人脑负担有降低吗？中、大型项目维护起来更方便吗？</p> <p>随着基于组件开发在 web 前端领域的普及，原子类的身影逐渐消失；但最近因为某个 CSS 框架人气走高的原因，原子类再度死灰复燃……</p> <p>那么，原子类或者说样式原子化是错的吗？不是，都是时臣的错！啊，不！都是 utility-first 思想的错！</p> <p>class 应该是语义化的，尤其是在基于组件开发时，让在视图结构中一眼看到 class 后，就知道它是个什么东西，而不是它长什么样。</p> <p>另外，基于组件开发的特点之一就是封装，对外屏蔽内部细节；而 utility-first 思想恰恰是暴露细节，这与基于组件开发的理念「三观不合」。</p> <p>在基于组件开发的体系下，class 理应是 component-first，即应用 CSS 组件（CSS component），那些 utility class 作为辅助存在。也就是说，当 CSS 组件自带样式与实际需求有些许不符时，利用 utility class 进行「微调」，而不是在外部重写 CSS 组件的样式——这也是一种组合方式。</p> <p>比如，按钮 CSS 组件本身是不会在水平方向撑满容器的，但设计师想让它占满一行——</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">.</span><span class="nc">Button</span> <span class="p">{</span>
  <span class="k">display</span><span class="p">:</span> <span class="kc">inline-block</span><span class="p">;</span>
  <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">u-block</span> <span class="p">{</span>
  <span class="k">display</span><span class="p">:</span> <span class="kc">block</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Button u-block&quot;</span><span class="p">&gt;</span>CSS component<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></figure> <p>CSS 组件在本系列文章所阐述的 UI 组件体系中，叫做「视觉组件」，class 的命名遵循 BEM 的变体——<a href="https://github.com/suitcss/suit/blob/master/doc/naming-conventions.md" target="_blank" rel="external nofollow">SUIT CSS 命名约定</a>。</p> <p><a href="http://suitcss.github.io/" target="_blank" rel="external nofollow">SUIT CSS</a> 是 <a href="http://necolas.github.io/normalize.css/" target="_blank" rel="external nofollow">Normalize.css</a> 的作者 <a href="http://nicolasgallagher.com/" target="_blank" rel="external nofollow">Nicolas Gallagher</a> 于 2013 年左右时创立，虽然现在已经处于基本不维护的状态了，但它基于组件开发的思想仍发挥着余热。</p> <p>SUIT CSS 命名约定我从 2014 年用到现在，并且会继续用下去。本系列文章 CSS 相关的示例代码中 class 的命名皆遵循此命名约定。在基于组件开发的体系下，强烈建议 class 命名遵循 SUIT CSS 命名约定——</p> <figure class="highlight"><pre><code class="language-css" data-lang="css"><span></span><span class="c">/* 组件 */</span>
<span class="p">.</span><span class="nc">ComponentName</span> <span class="p">{}</span>

<span class="c">/* 组件修饰符 */</span>
<span class="p">.</span><span class="nc">ComponentName--modifierName</span> <span class="p">{}</span>

<span class="c">/* 组件后代 */</span>
<span class="p">.</span><span class="nc">ComponentName-descendentName</span> <span class="p">{}</span>

<span class="c">/* 组件状态 */</span>
<span class="p">.</span><span class="nc">ComponentName</span><span class="p">.</span><span class="nc">is-stateOfComponent</span> <span class="p">{}</span>

<span class="c">/* 辅助工具 */</span>
<span class="p">.</span><span class="nc">u-utilityName</span> <span class="p">{}</span></code></pre></figure> <p>组件基类 <code>.ComponentName</code> 及其后代 <code>.ComponentName-descendentName</code> 很好理解，它们天然具有层级关系，共同描述了一个 UI 组件的结构——</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="c">&lt;!-- 用语义化 HTML 标签 --&gt;</span>
<span class="p">&lt;</span><span class="nt">article</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Article&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">header</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Article-header&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Article-title&quot;</span><span class="p">&gt;</span>文章标题<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">section</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Article-section&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>章节标题<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>章节段落<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">footer</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Article-footer&quot;</span><span class="p">&gt;</span>一些其他信息<span class="p">&lt;/</span><span class="nt">footer</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">article</span><span class="p">&gt;</span>

<span class="c">&lt;!-- 用非语义化 HTML 标签，更能凸显出 class 命名语义化的作用 --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Article&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Article-header&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Article-title&quot;</span><span class="p">&gt;</span>文章标题<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Article-section&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>章节标题<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>章节段落<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Article-footer&quot;</span><span class="p">&gt;</span>一些其他信息<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></figure> <p>而组件修饰符 <code>.ComponentName--modifierName</code> 和组件状态 <code>.ComponentName.is-stateOfComponent</code> 有时就不能很好地区分何时该用哪个了。就拿按钮 CSS 组件来说，它的颜色、是否可用与尺寸，哪个该用修饰符？哪个算是状态？</p> <p>我给出一个比较简单的判断标准：如果是 UI 组件的特性，即不会因为什么条件而改变的，用修饰符；倘若会因某个条件满足与否而变化，那就是状态——</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="c">&lt;!-- 用语义化 HTML 标签，大号（尺寸）的主要（功能色）操作按钮 --&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Button Button--primary Button--large&quot;</span><span class="p">&gt;</span>新增<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

<span class="c">&lt;!-- 用非语义化 HTML 标签，不可用（状态）的危险（功能色）操作按钮 --&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;Button Button--danger is-disabled&quot;</span><span class="p">&gt;</span>批量删除<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span></code></pre></figure> <p>应该注意的是，组件修饰符和组件状态都是直接加在 UI 组件的根节点上的，也就是要跟在组件基类的后面，不能用于组件后代上。假如一个组件后代需要程序化地改变它本身的样式，要用辅助工具类而不是状态类。当一个组件后代的结构、功能等变得复杂时，要将其封装成一个新的组件。</p> <h3 id="sass--css-">Sass 变量与 CSS 自定义属性</h3> <p>在本系列文章所阐述的 UI 组件体系中，Sass 变量和 CSS 自定义属性合称为「风格组件」，它们负责主题风格的定制，是与设计体系（Design System）的结合点。其中，Sass 变量是在编辑时/编译时，CSS 自定义属性则是在运行时。</p> <p>在这里，Sass 变量与 CSS 自定义属性的命名方式比较类似，它们大概都是 <code>&lt;namespace&gt;-&lt;component-name&gt;[-descendent-name|-modifier-name][-state]-(variable-name|property-name)</code> 的形式。</p> <p>由于我在基于本系列文章所阐述的思想做一套叫做「<a href="https://petals-ui.github.io/" target="_blank" rel="external nofollow">Petals</a>」的半成品 UI 组件，因此之后的示例代码中涉及到的 <code>&lt;namespace&gt;</code> 部分基本都会用 <code>petals</code>。</p> <p>Sass 变量是以 <code>$__petals</code> 或 <code>$petals</code> 开头，与组件名之间用 <code>--</code> 连接，前者是内部使用（私有）的，上层开发者无需关心，后者是供外部在编辑时/编译时定制用；CSS 自定义属性则用 <code>--petals</code> 开头，以 <code>-</code> 与组件名相连——</p> <figure class="highlight"><pre><code class="language-css" data-lang="css"><span></span><span class="c">/* 实际形式：&lt;namespace&gt;-&lt;component-name&gt;-(variable-name|property-name) */</span>
<span class="o">$</span><span class="nt">__petals--button-font-size</span><span class="o">:</span> <span class="nt">--petals-button-font-size</span><span class="o">;</span>
<span class="o">$</span><span class="nt">__petals--button-line-height</span><span class="o">:</span> <span class="nt">--petals-button-line-height</span><span class="o">;</span>

<span class="c">/* 实际形式：&lt;namespace&gt;-&lt;component-name&gt;-&lt;modifier-name&gt;-&lt;state&gt;-(variable-name|property-name) */</span>
<span class="o">$</span><span class="nt">petals--button-primary-focus-color</span><span class="o">:</span> <span class="nt">var</span><span class="o">($</span><span class="nt">__petals--primary-active-color</span><span class="o">,</span> <span class="o">$</span><span class="nt">petals--primary-active-color</span><span class="o">)</span> <span class="o">!</span><span class="nt">default</span><span class="o">;</span>
<span class="o">$</span><span class="nt">petals--button-primary-focus-bg</span><span class="o">:</span> <span class="nt">var</span><span class="o">($</span><span class="nt">__petals--primary-active-bg</span><span class="o">,</span> <span class="o">$</span><span class="nt">petals--primary-active-bg</span><span class="o">)</span> <span class="o">!</span><span class="nt">default</span><span class="o">;</span></code></pre></figure> <p>上文所说的 CSS 组件，即视觉组件，它是将样式进行封装，对外屏蔽细节；而风格组件相反，通过将视觉组件所用到的 CSS 属性值动态化的方式达到样式可定制化的目的，这就变得像 utility-first 的原子类一样暴露了样式细节。</p> <p>但与 utility-first 的 CSS 框架不同的是，风格组件只给进行主题风格定制的人带来了心智负担，对其他的上层开发者并无影响。</p> <h2 id="section-2">业务无关</h2> <p>本系列文章主要讨论的对象是业务无关的 UI 组件，在单说「UI 组件」或「组件」时也是指这个；而业务相关的 UI 组件，在本系列文章所阐述的 UI 组件体系中叫做「部件」。</p> <blockquote> <p>根据 UI 组件的通用性，可分为「通用组件」和「专用组件」。「通用组件」是能够满足大部分常规场景的 UI 组件，它们的集合通常会作为「组件库」整体打包发布为一个软件包；「专用组件」是为了解决某些特殊场景需求而存在的，像数据网格、各种编辑器等，这类一般都是单独发包。</p> <footer>欧雷《<cite><a href="/posts/the-features-of-frontend-ui-components/">聊聊前端 UI 组件：组件特征</a></cite>》</footer> </blockquote> <p>上面提到的「通用组件」和「专用组件」都是业务无关的 UI 组件。</p> <p>UI 组件是什么？可以认为它是一个返回视图结构的函数，而 UI 组件的属性（prop）和事件（event）就是这个「函数」的参数。属性是 UI 组件的外部与其内部进行主动通信的数据，事件则是进行被动通信的回调函数。</p> <p>一个封装得好的函数，它的参数应尽可能少，要想明白每个参数的语义，且必须确实有其存在的意义——UI 组件的属性和事件的设计也该如此。</p> <p>在设计 UI 组件的属性时，先思考下要加的这个属性是不是属于这个 UI 组件本身的特性？若不是，那要加的属性的值所对应的 UI 组件的特性是什么？如果这两个问题都没有得到答案，那么这个属性可以不用加了。</p> <p>UI 组件的属性只应与其本身的特性有关，与业务意义无关——自身特性是自然特性，业务意义是附加特性。</p> <p>比如，一个按钮组件通常会有「主要」、「次要」和「危险」这几种多少与业务沾边的语义，那么组件的属性该如何设计来满足这种需求呢？</p> <p><a href="https://ant.design/components/button-cn/" target="_blank" rel="external nofollow">Ant Design</a> 和 <a href="https://element.eleme.cn/#/zh-CN/component/button" target="_blank" rel="external nofollow">Element</a> 的做法是将其作为 <code>type</code> 属性的值或独立成一个属性——</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="p">&lt;</span><span class="nt">Button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;primary&quot;</span><span class="p">&gt;</span>Ant Design 中的主要按钮<span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">Button</span><span class="p">&gt;</span>Ant Design 中的次要（默认）按钮<span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">Button</span> <span class="na">danger</span><span class="p">&gt;</span>Ant Design 中的危险按钮<span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;primary&quot;</span><span class="p">&gt;</span>Element 中的主要按钮<span class="p">&lt;/</span><span class="nt">el-button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">el-button</span><span class="p">&gt;</span>Element 中的次要（默认）按钮<span class="p">&lt;/</span><span class="nt">el-button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">el-button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;danger&quot;</span><span class="p">&gt;</span>Element 中的危险按钮<span class="p">&lt;/</span><span class="nt">el-button</span><span class="p">&gt;</span></code></pre></figure> <p>按照上面说的 UI 组件属性设计原则来看，「主要」、「次要」和「危险」作用到按钮组件上的表现主要是颜色发生了变化，所以应该去用表示按钮的自然特性「颜色」的 <code>color</code> 属性来满足同样的需求——</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="p">&lt;</span><span class="nt">button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span><span class="p">&gt;</span>主要按钮<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>次要（默认）按钮<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;danger&quot;</span><span class="p">&gt;</span>危险按钮<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

<span class="c">&lt;!-- 还可以扩展出其他任意多颜色的按钮 --&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;f00&quot;</span><span class="p">&gt;</span>红色按钮<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;yellow&quot;</span><span class="p">&gt;</span>黄色按钮<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;blue&quot;</span><span class="p">&gt;</span>蓝色按钮<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre></figure> <p>若 UI 组件的某组特性是二元对立的，如「禁用」与「启用」，则选择默认不生效的那个作为属性，且属性值是布尔型，默认值为 <code>false</code>。</p> <p>还是拿按钮组件来举例：如果默认是「禁用」，那就设计一个代表「启用」的 <code>enabled</code> 属性，其默认值是 <code>false</code>，只要组件在被使用时传入了 <code>enabled</code>，就变成了「启用」状态；反之亦然。</p> <p>另外，UI 组件的属性值尽可能是简单数据类型，也就是数字、字符串等。</p> <h2 id="section-3">业务相关</h2> <p>业务相关的 UI 组件，即上文所说的「部件」，因其关注点与业务无关的 UI 组件不同，所以在设计时所遵守的原则和考虑的事情也不尽相同，甚至会大相径庭。一般来说，会用到上下文与依赖注入等技术。</p> <p>由于业务相关的 UI 组件不是本系列文章主要讨论的对象，在此就不展开说了。</p> <h2 id="section-4">总结</h2> <p>前几天在朋友圈立了个 flag——</p> <figure> <img src="/assets/posts/20210128/flag-0a734b1855359e1c5fbcdb9d801fd97d9a043b2046d22a414eff8bfa68638cb7.jpg" alt="立旗" /> <figcaption>立旗</figcaption> </figure> <p>本文就是该 flag 的「引子」。</p> <div class="Article-donation"> <div class="Article-donationDetail"> <p>创作不易，若本文给你提供了价值，还请不吝<span class="Article-donationCharge">为<a href="https://linxoid.com/ourai/" target="_blank" rel="external nofollow">欧雷</a>充电</span></p> <p><img src="/assets/qrcodes/pay/wechat/donation-e2e3575287a218b650a69211a6d5e9220f9ad0314b2e946edcdc62cffcefcbd9.jpg" width="120"><img src="/assets/qrcodes/pay/alipay/ourai-2492dcf9d66d7a690e0576aa38945ad96e656b370d176c0b087638e83105844d.jpg" width="120"></p> <p>左为<span style="color: #38a138">微信</span>，右为<span style="color: #4b5dfa">支付宝</span>；充电累计 <strong>¥88</strong> 以上可在付款时备注或<a href="mailto:ourairyu+donate@gmail.com" target="_blank" rel="external nofollow">邮件</a>告知昵称和需要被链接的网址，会列在「<a href="/sponsor/#current">赞助</a>」页。其他方式与具体规则请见「<a href="/sponsor/#donation">资助</a>」。</p> </div> </div></div> <footer class="Article-footer col-md-3"> <div class="Widget Article-category"> <div class="Widget-body"> <p><i class="fa fa-pencil"></i>发布在</p> <div> <h3><a href="/categories/web-development/">网站开发</a></h3> <p>利用网页程序语言等技术进行网站和网络应用的开发与维护</p> </div> </div> </div> <div class="Widget Article-author hidden-xs hidden-sm"> <a class="Widget-body Author" href="https://linxoid.com/ourai/" title="了解欧雷" target="_blank" rel="external nofollow"> <h3 class="Author-name">欧雷</h3> <p class="Author-intro">日本深度中毒的<strong>新四有青年</strong>、<span lang="en">C<i class="fa fa-coffee"></i>ffee L<i class="fa fa-heart"></i>ver</span>，<strong>多面玩家</strong>。</p> </a> </div> <div class="Widget Article-license"> <div class="Widget-body"> <p>本文采用知识共享<i class="fa fa-creative-commons"></i><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="external nofollow">署名-非商业性使用 4.0 国际</a>许可协议，可自由转载、引用，但需署名作者并注明文章出处且不能用于商业用途。</p> </div> </div> <div class="Widget Widget--share"> <div class="Widget-body"> <p>分享到<i class="fa fa-share-alt"></i></p> <div class="social-share" data-sites="wechat,weibo,twitter"></div> </div> </div> <div class="Widget Article-series"> <div class="Widget-body"> <p><strong>聊聊前端 UI 组件</strong> 系列</p> <p>静下心来好好聊聊前端 UI 组件相关的事情</p> <p>共有 <a href="/series/talking-about-frontend-ui-components/">4</a> 篇文章，<a href="/series/talking-about-frontend-ui-components/">前往围观 &gt;</a></p> </div> </div> <section class="Widget Widget--toc"> <div class="Widget-header"> <h2 class="Widget-title">目录</h2> </div> <div class="Widget-body"></div> </section> </footer> <!-- 相邻文章 --> <nav class="Article-siblings LightBox col-md-9"> <ul> <li class="Sibling Sibling--previous"> <a href="/posts/write-books/" style="background-image: url('/assets/posts/20210116/banner-a420fe8fb2d0b095f68508aad5f33a07356e4379e5d24f2793d67805ca37b25f.jpg');"> <h3>我若出书，你欲看否？</h3> <p>看到标题，估计有人会想：「啥？你想出书？！你怕不是来搞笑的吧？你何德何能？！」——是的，我不是来搞笑的。</p> </a> </li> <li class="Sibling Sibling--next"> <a href="/posts/atomic-design-how-to-design-systems-of-components/" style="background-image: url('/assets/posts/20210204/banner-b74aaed43403f538fb02ca2f8280fb4125f147861af95ef82eb451ea053c2ae6.jpg');"> <h3>原子设计：如何设计组件体系</h3> <p>如今，数字产品必须能够同时适用于任意和所有的设备、屏幕尺寸和媒介：</p> </a> </li> </ul> </nav> <!-- 评论区 --> <div class="Article-comments col-md-9"> <div id="disqus_thread"></div> <script type="text/javascript" src="/assets/disqusjs.min-4aa6c162858d0f13ecf2af9524ee286e764a5989b6c891b736e5a70e0a520522.js"></script> <script> var dsqjs = new DisqusJS({ shortname: 'ourairyu', siteName: '欧雷流', identifier: '/posts/design-frontend-ui-components/', url: 'http://' + location.host + '/posts/design-frontend-ui-components/', title: '聊聊前端 UI 组件：组件设计', api: 'https://disqus.skk.moe/disqus/', apikey: 'Ht1OT36NinKAkkNd2l0goxrLqXDGMg1zJKWx7309PWDunyGh6jbjRt3JUmvgHSIn', admin: 'ourai', adminLabel: '鹳狸猿' }); </script> </div> </article> </div> </main> <footer class="Page-footer Footer"> <div class="container"> <div class="Footer-description"> <!-- 重要链接 --> <nav class="Footer-navs"> <ul> <li><a href="https://meta.ourai.ws/?utm_source=ourai.ws&utm_medium=common-footer" title="访问「欧雷宇宙」" target="_blank" rel="external nofollow"><span>@</span></a></li> <li><a href="/about/"><span>关于</span></a></li> <li><a href="/sponsor/"><span>赞助</span></a></li> <li><a href="/topics/"><span>专题</span></a></li> <li><a href="/projects/"><span>计划</span></a></li> <li><a href="/thanks/"><span>致谢</span></a></li> <li><a href="https://yaol.in/cooperation/?utm_source=ourai.ws&utm_medium=common-footer" target="_blank" rel="external nofollow"><span>合作</span></a></li> </ul> </nav> <!-- 网站版权 --> <div class="Footer-copyright"> <p>&copy; 2009-2025 <a href="/">欧雷流</a> 版权所有</p> <p>采用 <a href="http://jekyllrb.com" target="_blank" rel="external nofollow">Jekyll</a> 生成 ♥ 版本为 <span title="构建于 2025-03-01 04:43">v3046f1b</span></p> </div> <div class="Footer-licenses"> <p><a href="http://beian.miit.gov.cn" target="_blank" rel="external nofollow">浙ICP备16006930号-1</a></p> <p><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602005556" target="_blank" rel="external nofollow">浙公网安备 33010602005556号</a></p> </div> <!-- 社交网站 --> <div class="Footer-links hidden-xs"> <ul> <li class="Icon Icon--email"><a href="mailto:ourairyu@gmail.com" title="发送邮件给我" target="_blank" rel="external nofollow">ourairyu@gmail.com</a></li> <li class="Icon Icon--gh"><a href="https://github.com/ourai" title="查看我的全部开源项目" target="_blank" rel="external nofollow">GitHub</a></li> <li class="Icon Icon--zh"><a href="https://www.zhihu.com/people/ourai" target="_blank" rel="external nofollow">知乎</a></li> </ul> </div> </div> </div> </footer> <script type="text/javascript" src="/assets/share.min-3155ee636b84a04d036e0f1ba833227d3fd03a4c58a6f2e21c9ceb1c5d0198c7.js"></script><script type="text/javascript" src="/assets/components-a266f21fe1dfd61bebf40e74872cbf901eb3e201f7d33e9e5d5af9a55f4b24ea.js"></script> <script type="text/javascript" src="/assets/initializers/time-8d7a529a66ae6cb53c2283d21fd6a12c538b8473dd5bd76458366d09adce7bf6.js"></script><script type="text/javascript" src="/assets/initializers/lazyload-44b7df8a9282d598284d522e64d6be9ac88d466f3c4a734a514303e99347b2c9.js"></script> </body> </html>
